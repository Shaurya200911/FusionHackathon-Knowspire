{% extends "base.html" %}
{% load static %}

{% block head %}
<title>{{ skill.title }} – KnowSpire</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  :root {
    --bg: #ffffff;
    --text: #000000;
    --card-bg: #f8f9fa;
    --accent: #6366f1;
    --sidebar-bg: #f8f9fa;
    --sidebar-text: #000000;
    --sidebar-hover: #e2e8f0;
  }
  [data-theme="dark"] {
    --bg: #0d1117;
    --text: #ffffff;
    --card-bg: #161b22;
    --accent: #a78bfa;
    --sidebar-bg: #1e293b;
    --sidebar-text: #ffffff;
    --sidebar-hover: #334155;
  }
  html, body, #theme-root {
    background-color: var(--bg) !important;
    color: var(--text) !important;
    transition: background 0.3s, color 0.3s;
  }
  .dashboard-layout {
    display: flex;
  }
  .sidebar {
    width: 250px;
    background-color: var(--sidebar-bg);
    padding: 20px;
    min-height: 100vh;
  }
  .sidebar-link {
    display: block;
    color: var(--sidebar-text);
    padding: 10px;
    margin-bottom: 10px;
    text-decoration: none;
    border-radius: 5px;
  }
  .sidebar-link:hover {
    background-color: var(--sidebar-hover);
  }
  .main-content {
    flex-grow: 1;
    padding: 40px;
    background: none;
    color: var(--text);
  }
  .theme-toggle {
    margin-top: 20px;
  }
  .alert-info {
    background: var(--card-bg) !important;
    color: var(--text) !important;
    border-color: var(--accent) !important;
  }
</style>
{% endblock %}

{% block body %}
<div id="theme-root" data-theme="light" class="dashboard-layout">
  <div class="sidebar">
    <div class="text-center mt-4">
      <img src="{% static 'assets/images/img_header_logo.png' %}" width="80" alt="Logo">
    </div>
    <a href="{% url 'dashboard' %}" class="sidebar-link">🏠 Dashboard</a>
    <a href="{% url 'leaderboard' %}" class="sidebar-link">🏆 Leaderboard</a>    <a href="{% url 'skills' %}" class="sidebar-link active">📘 Skills</a>
    <a href="{% url 'logout' %}" class="sidebar-link" id="logout-link">🔓 Logout</a>
    <button class="theme-toggle btn btn-outline-secondary w-100" id="theme-toggle-btn">🌙 Toggle Theme</button>
  </div>
  <div class="main-content">
    <div class="container" id="session-container">
      <h2 class="mb-4">{{ skill.title }}</h2>
      <div class="alert alert-info">No content available for this skill. (Lessons, flashcards, and quizzes are not implemented in the current version.)</div>
    </div>
  </div>
</div>
<script>
  // Theme toggle
  const root = document.getElementById('theme-root');
  const toggleBtn = document.getElementById('theme-toggle-btn');
  const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
  root.setAttribute('data-theme', savedTheme);
  toggleBtn.textContent = savedTheme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';
  function setTheme(next) {
    root.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    toggleBtn.textContent = next === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';
  }
  toggleBtn.addEventListener('click', () => {
    const current = root.getAttribute('data-theme');
    const next = current === 'light' ? 'dark' : 'light';
    setTheme(next);
  });
  // Listen for system theme changes
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
    const systemTheme = e.matches ? 'dark' : 'light';
    if (!localStorage.getItem('theme')) setTheme(systemTheme);
  });
  document.getElementById('logout-link').addEventListener('click', function(e) {
    // No preventDefault, just follow the link (GET request)
  });
</script>
{% endblock %}
